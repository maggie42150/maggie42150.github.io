<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <title>Hello, Apple!</title>

    <style>
        .main {
            display: flex;
            flex-wrap: wrap;
        }

        #choice-text {
            margin-left: 100px;
        }

        #photo img {
            width: 100%;
        }

        #choice {
            margin: auto;
            padding-top: 80px;
        }

        #nb {
            display: flex;
            flex-wrap: wrap;
            list-style: none;
            background-color: black;
            
        }

        li {
            margin: auto;
        }
        li a{
            text-decoration:none;
            color: white;
        }

        #navbar{
            background-color: white;
            height: 40px;
            display: flex; 
            justify-content: space-between;
            align-items: center;
        }
        
        #homepage img{
            width: 100%;
        }


        #type button {
            width: 420px;
            height: 120px;
            margin: 10px;
            border-radius: 20px;
            padding-top: 10px;
            background-color: white;
        }

        #type {
            border-bottom: 1px grey solid;
        }
        #tb {    
            display: flex; 
            justify-content: space-between;
            align-items: center;
            padding-left: 20px;
            padding-right: 20px;
            text-align: left;
        }

       
        #color img {
            width: 30px;
            height: 30px;
            margin-bottom: 10px;
        }

        #color button {

            width: 200px;
            height: 120px;
            margin: 10px;
            border-radius: 20px;
            padding-top: 10px;
            background-color: white;
        }

        #color {
            border-bottom: 1px grey solid;
        }

        #storage button {
            width: 200px;
            height: 120px;
            margin: 10px;
            border-radius: 20px;
            padding-top: 10px;
            background-color: white;
        }
    </style>
</head>

<body>
    <div id="nb">
            <li><a class="active" href="#" id="iphone">iPhone 12</a></li>
            <li><a href="#" id="ipad">iPad</a></li>
            <li><a href="#" id="imac">iMac</a></li>
    </div>
    <div id="homepage">
        <img src="photo/homepage.png">
    </div>

    <template id='type-btn'>
        <button id="tb">
            <div>
                <h5></h5>
                <p></p>
            </div>
            <div id="pricefrom"></div>
        </button>
    </template>
    <template id='color-btn'>
        <button>
            <img id=cimg src="">
            <p id="cp"> </p>
        </button>
    </template>

    <template id='storage-btn'>
        <button>
            <p id="sp"> </p>
        </button>
    </template>

    <template id='mouse'>
        <div class="container">
            <div class="main">
                <div class="col-12 col-md-12"id="navbar">
                    <div id="productname"></div>
                    <div id="pricetag"></div>
                </div>
                <div class="col-12 col-md-6" id="photo">
                    <img class=productimg src="photo/iphone-12-purple-select-2021.png">
                </div>

                <div class="col-12 col-md-6" id="choice">
                    <div id="choice-text">
                        <h1 id="maintitle"></h1>
                        <p id="introduction"></p>

                        <div id="type"></div>

                        <p></p>

                        <div id="color"></div>
                        <div id="storage"></div>
                        <div id="price"></div>

                    </div>
                </div>
            </div>
        </div>

    </template>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous">
        </script>
    <script>
        const ipads = [
            {
                "sku": "MW762",
                "price": 10900,
                "storage": "32GB",
                "description": "10.2 吋 iPad Wi-Fi 機型 32GB - 金色",
                "picture": "ipad_gold.png"
            },
            {
                "sku": "MW792",
                "price": 13900,
                "storage": "128GB",
                "description": "10.2 吋 iPad Wi-Fi 機型 128GB - 金色",
                "picture": "ipad_gold.png"
            },
            {
                "sku": "MW742",
                "price": 10900,
                "storage": "32GB",
                "description": "10.2 吋 iPad Wi-Fi 機型 32GB - 太空灰色",
                "picture": "ipad_space.png"
            },
            {
                "sku": "MW772",
                "price": 13900,
                "storage": "128GB",
                "description": "10.2 吋 iPad Wi-Fi 機型 128GB - 太空灰色",
                "picture": "ipad_space.png"
            },
            {
                "sku": "MW752",
                "price": 10900,
                "storage": "32GB",
                "description": "10.2 吋 iPad Wi-Fi 機型 32GB - 銀色",
                "picture": "ipad_silver.png"
            },
            {
                "sku": "MW782",
                "price": 13900,
                "storage": "128GB",
                "description": "10.2 吋 iPad Wi-Fi 機型 128GB - 銀色",
                "picture": "ipad_silver.png"
            },
            {
                "sku": "MW6D2",
                "price": 15400,
                "storage": "32GB",
                "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB - 金色",
                "picture": "ipad_gold.png"
            },
            {
                "sku": "MW6G2",
                "price": 18400,
                "storage": "128GB",
                "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB - 金色",
                "picture": "ipad_gold.png"
            },
            {
                "sku": "MW6A2",
                "price": 15400,
                "storage": "32GB",
                "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB - 太空灰色",
                "picture": "ipad_space.png"
            },
            {
                "sku": "MW6E2",
                "price": 18400,
                "storage": "128GB",
                "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB - 太空灰色",
                "picture": "ipad_space.png"
            },
            {
                "sku": "MW6C2",
                "price": 15400,
                "storage": "32GB",
                "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB - 銀色",
                "picture": "ipad_silver.png"
            },
            {
                "sku": "MW6F2",
                "price": 18400,
                "storage": "128GB",
                "description": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB - 銀色",
                "picture": "ipad_silver.png"
            }
        ];
    </script>
    <script>
        const color_array = {
            "iPhone":
                [
                    { name: "ink", zh_name: "石墨色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-finish-graphite-2020?wid=204&hei=204&fmt=jpeg&qlt=80&.v=1601054548000", url2: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-black-select-2020?wid=470&hei=556&fmt=png-alpha&.v=1604343702000" },
                    { name: "silver", zh_name: "銀色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-finish-silver-2020?wid=204&hei=204&fmt=jpeg&qlt=80&.v=1601054548000", url2: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-green-select-2020?wid=470&hei=556&fmt=png-alpha&.v=1604343704000" },
                    { name: "gold", zh_name: "金色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-finish-gold-2020?wid=204&hei=204&fmt=jpeg&qlt=80&.v=1601054548000", url2: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-blue-select-2020?wid=470&hei=556&fmt=png-alpha&.v=1604343704000" },
                    { name: "opacific", zh_name: "太平洋藍色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-finish-blue-2020?wid=204&hei=204&fmt=jpeg&qlt=80&.v=1601054547000", url2: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-blue-select-2020?wid=470&hei=556&fmt=png-alpha&.v=1604343704000" }
                ],
            "iPad": [
                { name: "gray", zh_name: "太空灰色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-space-gray-201508?wid=32&amp;hei=32&amp;fmt=png-alpha&amp;.v=0" },
                { name: "silver", zh_name: "銀色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-finish-silver-2020?wid=204&hei=204&fmt=jpeg&qlt=80&.v=1601054548000" }
            ],
            "MacBook": [
                { name: "gray", zh_name: "太空灰色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-space-gray-201508?wid=32&amp;hei=32&amp;fmt=png-alpha&amp;.v=0" },
                { name: "silver", zh_name: "銀色", url: "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-finish-silver-2020?wid=204&hei=204&fmt=jpeg&qlt=80&.v=1601054548000" }
            ]
        }
        const storage_array = {
            "iPhone":
                [
                    { "storage": "32GB" },
                    { "storage": "128GB" }
                ],
            "iPad": [
                { "storage": "32GB" },
                { "storage": "128GB" }
            ],
            "MacBook": [
                { "storage": "32GB" },
                { "storage": "128GB" }
            ]
        }
        const iphones = {
            "iphone12": 
            { "pp": "6.1 吋顯示器",
             "pricefrom":"NT$26,900 起",
            "data":[
                {
                    "price": 10900,
                    "storage": "32GB",
                    "pp": "6.1 吋顯示器",
                    "pricefrom":"NT$26,900 起"
                },
                {
                    "price": 13900,
                    "storage": "128GB",
                }
                // {
                //     "price": 15400,
                //     "storage": "32GB",
                //     "url": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB",
                // },
                // {
                //     "price": 18400,
                //     "storage": "128GB",
                //     "url": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB",
                // }
            ]},
            "iphone12 mini": 
            {   "pp": "5.4 吋顯示器",
                "pricefrom":"NT$23,900 起",
            
                "data":[
                {
                    "price": 900,
                    "storage": "32GB",
                },
                {
                    "price": 3900,
                    "storage": "128GB",
                    "url": "10.2 吋 iPad Wi-Fi 機型 128GB",
                }
                // {
                //     "price": 15400,
                //     "storage": "32GB",
                //     "url": "10.2 吋 iPad Wi-Fi + 行動網路機型 32GB",
                // },
                // {
                //     "price": 18400,
                //     "storage": "128GB",
                //     "url": "10.2 吋 iPad Wi-Fi + 行動網路機型 128GB",
                // }
                  ]
            }
        }
    </script>
    <script>
        var product = [
            {
                'type': ["iphone12", "iphone12 mini"],
                'model': 'iphone',
                'color': [
                    { 'color': '黑色', 'colorValue': '#1d1d1f', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-black-select-2020?wid=470&hei=556&fmt=png-alpha&.v=1604343702000' },
                    { 'color': '綠色', 'colorValue': '#def4d9', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-green-select-2020?wid=470&hei=556&fmt=png-alpha&.v=1604343704000' },
                    { 'color': '藍色', 'colorValue': '#1e4971', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-blue-select-2020?wid=470&hei=556&fmt=png-alpha&.v=1604343704000' }
                ],
                'Storge': [
                    { 'size': '64GB', 'price': 24900 },
                    { 'size': '128GB', 'price': 26900 },
                    { 'size': '256GB', 'price': 30400 }
                ],
                'baseImgUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone-12-select-2021?wid=470&amp;hei=556&amp;fmt=jpeg&amp;qlt=95&amp;.v=1617130318000',

            },
            {
                'model': 'ipad',
                'color': [
                    { 'color': '銀色', 'colorValue': '#c6c7c8', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-cell-silver-202009?wid=470&hei=556&fmt=png-alpha&.v=1598650645000' },
                    { 'color': '太空灰色', 'colorValue': '#57585c', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-cell-spacegray-202009?wid=470&hei=556&fmt=png-alpha&.v=1598650642000' },
                    { 'color': '玫瑰金色', 'colorValue': '#f4cdc6', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-cell-gold-202009?wid=470&hei=556&fmt=png-alpha&.v=1598650642000' }
                ],
                'Storge': [
                    { 'size': '32GB', 'price': 10900 },
                    { 'size': '128GB', 'price': 13900 }
                ],
                'baseImgUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-202009?wid=443&hei=535&fmt=jpeg&qlt=95&.v=1599066777000',
            },
            {
                'model': 'Mac',
                'color': [
                    { 'color': '銀色', 'colorValue': '#c6c7c8', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/mbp16touch-silver-select-201911_GEO_TW?wid=452&hei=420&fmt=jpeg&qlt=95&.v=1573153623825' },
                    { 'color': '太空灰色', 'colorValue': '#57585c', 'imageUrl': 'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/mbp16touch-space-select-201911_GEO_TW?wid=452&hei=420&fmt=jpeg&qlt=95&.v=1573165435411' },
                ],
                'Storge': [
                    { 'size': '256GB', 'price': 51300 },
                    { 'size': '512GB', 'price': 57300 },
                    { 'size': '1TB', 'price': 63300 },
                    { 'size': '2TB', 'price': 75300 }
                ],
                'baseImgUrl': 'https://github.com/Sandydai05/Sandydai05.github.io/blob/main/AppleImg/macbook-air-space-gray-select-.jpg?raw=true',
            }
        ];
    </script>
    <script>
        let page = document.querySelector('#mouse');
        let type_btn = document.querySelector('#type-btn');
        // let pp =document.querySelector('#pp');
        // let pricefrom=document.querySelector('#pricefrom');
        let color_btn = document.querySelector('#color-btn');
        let storage_btn = document.querySelector('#storage-btn');
        //let iphone_array = Object.keys(iphones);
        let ip_color_array = [];
        let ip_storage_array = [];
        color_array.iPhone.forEach((x, idx) => { ip_color_array[idx] = x.zh_name });
        storage_array.iPhone.forEach((x, idx) => { ip_storage_array[idx] = x.storage });
        let cloneContent = page.content.cloneNode(true);
        let navbar=cloneContent.querySelector('#navbar');
        let productname =cloneContent.querySelector('#productname');
        let pricetag=cloneContent.querySelector('#pricetag');
        let img = cloneContent.querySelector('img');
        let h1 = cloneContent.querySelector('h1');
        let type = cloneContent.querySelector('#type');
        let color = cloneContent.querySelector('#color');
        let storage = cloneContent.querySelector('#storage');
        let img1 = cloneContent.querySelector('.productimg');
        let phone_price = cloneContent.querySelector('#price');
        let stor_btn_all = storage.querySelectorAll('button');
        let color1 = color.querySelectorAll('button');
        

        let storage_select;
        let type_select = 0;
        let price_select;

        window.onload = function () {

            let iphone = document.querySelector('#iphone').addEventListener('click', function () {

                if (document.body.querySelector('#homepage') != null)
                    document.body.removeChild(document.body.querySelector('#homepage'));
                    img.src = "photo/iphone-12-mini-select-2021.jfif";


                create_storage_btn(ip_storage_array);
                create_color_btn(ip_color_array);
                let color1 = color.querySelectorAll('button');
                create_type_btn(iphones);





                productname.innerText="iphone12";
                pricetag.innerText="NT$23,900 起";
                h1.innerText = "購買 iPhone 12";
               

            })

            let ipad = document.querySelector('#ipad').addEventListener('click', function () {
                if (document.body.querySelector('#homepage') != null)
                    document.body.removeChild(document.body.querySelector('#homepage'));
                img.src = "photo/ipad-pro-11-select-202104_GEO_TW.png";
                h1.innerText = "購買 iPad Pro";
            }
            )

            let imac = document.querySelector('#imac').addEventListener('click', function () {
                if (document.body.querySelector('#homepage') != null)
                    document.body.removeChild(document.body.querySelector('#homepage'));
                img.src = "photo/imac-24-blue-cto-hero-202104.jpg";
                h1.innerText = "購買全新 24 吋 iMac";
            }
            )

            document.body.append(cloneContent);
        }


        function create_type_btn(tmp_array) {
            type.innerHTML = '';
            let tmp = Object.values(tmp_array);
            tmp.forEach((item, idx) => {
                
                let clonetype_btn = type_btn.content.cloneNode(true);
                let key = Object.keys(tmp_array)[idx];
                clonetype_btn.querySelector('h5').innerText = `${Object.keys(tmp_array)[idx]}`;
                clonetype_btn.querySelector('p').innerText= `${tmp[idx].pp}`;
                clonetype_btn.querySelector('#pricefrom').innerText= `${tmp[idx].pricefrom}`;

                clonetype_btn.querySelector('button').addEventListener('click', function () {
                    type_select = idx;
                    color.querySelectorAll('button').forEach(x => { x.disabled = false });
                });
                type.appendChild(clonetype_btn);


            });
        }
        function create_color_btn(tmp_array) {

            color.innerHTML = '';
            tmp_array.forEach((item, idx) => {
                let sample = document.createElement('img');
                sample.setAttribute('src', color_array.iPhone[idx].url);
                let samplename = document.createElement('p');
                samplename.innerText = `${item}`;
                let btn = document.createElement('button');
                btn.appendChild(sample);
                btn.appendChild(samplename);
                btn.onclick = function () {
                    img1.src = color_array.iPhone[idx].url2;
                    storage.querySelectorAll('button').forEach(x => { x.disabled = false });
                }
                btn.disabled = true;
                color.appendChild(btn);
            });

        }
        function create_storage_btn(tmp_array) {
            storage.innerHTML = '';
            tmp_array.forEach((item, idx) => {
                let clonestorage_btn = storage_btn.content.cloneNode(true);
                clonestorage_btn.querySelector('p').innerText = `${item}`;
                clonestorage_btn.querySelector('button').addEventListener('click', function () {
                    storage_select = item;
                    price_select = Object.values(iphones)[type_select].data.filter(x => x.storage.includes(storage_select))[0].price;
                    phone_price.innerText = price_select;

                });
                clonestorage_btn.querySelector('button').disabled = true;
                storage.appendChild(clonestorage_btn);
            });
        }
    </script>


</body>

</html>